# {read.abares}: Download and Import Agricultural Data from the Australian Bureau of Agricultural and Resource Economics and Sciences (ABARES) and Australian Bureau of Statistics (ABS)

An R package for automated downloading and ingestion of data from the
Australian Bureau of Agricultural and Resource Economics and Sciences
(ABARES).

## About ABARES

ABARES is the research arm of the Australian federal Government
Department of Agriculture, Fisheries and Forestry (DAFF). ABARES’ main
role is “to provide professionally independent data, research, analysis
and advice that informs public and private decisions affecting
Australian agriculture, fisheries and forestry”[¹](#fn1).

The data provided by ABARES is extensive and varied, and includes data
on agricultural production, trade, and forecasts, as well as spatial
data on farm locations and topsoil thickness. ABARES data are not
available from other sources but are mostly available under Creative
Commons Licences for reuse.

## About {read.abares}: why this package?

ABARES makes several data sets freely available as spreadsheets in
Microsoft Excel or CSV file formats and zip archives of geospatial data
as NetCDF, GeoTIFF or shape files. {read.abares} facilitates downloading
and importing these files in your R session.

Data serviced includes but is not limited to:

- the [ABARES
  Estimates](https://www.agriculture.gov.au/abares/data/farm-data-portal#data-download);
- the [Australian Gridded Farm Data (AGFD)
  set](https://www.agriculture.gov.au/abares/research-topics/surveys/farm-survey-data/australian-gridded-farm-data);
- the [Australian Agricultural and Grazing Industries Survey
  (AAGIS)](https://www.agriculture.gov.au/abares/research-topics/surveys/farm-survey-data)
  region mapping files;
- the [Historical Agricultural Forecast
  Database](https://www.agriculture.gov.au/abares/research-topics/agricultural-outlook/historical-forecasts#:~:text=About%20the%20historical%20agricultural%20forecast,relevant%20to%20Australian%20agricultural%20markets);
- the [Soil Thickness for Australian areas of intensive agriculture of
  Layer 1 (A Horizon - top-soil) (derived from soil
  mapping)](https://data.agriculture.gov.au/geonetwork/srv/eng/catalog.search#/metadata/faa9f157-8e17-4b23-b6a7-37eb7920ead6)
  map;
- the [ABARES Trade
  Data](https://www.agriculture.gov.au/abares/research-topics/trade/dashboard)
  including:
  - the trade data;
  - the trade region data; and
- the [Land Use
  Data](https://www.agriculture.gov.au/abares/aclump/land-use/data-download)
  including:
  - National scale land use data;
  - Catchment scale land use data.

## Quick Start

{read.abares} is not available through CRAN (yet). The preferred method
is to use [{remotes}](https://remotes.r-lib.org) like so. Note that for
Linux users, you will need to install system libraries to support
geospatial packages in R, *e.g.*, {sf} and {terra} as well as some
packages for downloading data via [curl](https://curl.se/download.html).
Linux users, please see[²](#fn2).

``` r
if (!require("remotes")) {
  install.packages("remotes")
}

remotes::install_github("adamhsparks/read.abares",
  dependencies = TRUE,
  build_vignettes = TRUE
)
```

Or, if you prefer using [{pak}](https://pak.r-lib.org/index.html), it
does have some advantages. If you are using Linux and will need to
install system libraries to support geospatial packages in R, *e.g.*,
{sf} and {terra}, you can install {read.abares} like so using
[{pak}](https://pak.r-lib.org/index.html), this method will try to
handle system dependencies for you. It may also be a faster installation
method as well for any operating system.

``` r
o <- options() # save default options
options(pkg.build_vignettes = TRUE)

if (!require("pak")) {
  install.packages("pak",
    repos = sprintf(
      "https://r-lib.github.io/p/pak/stable/%s/%s/%s",
      .Platform$pkgType, R.Version()$os, R.Version()$arch
    )
  )
}

pak::pak("adamhsparks/read.abares", dependencies = TRUE)
options(o) # restore default options
```

## Features

### Standardised Column Names and Orders

ABARES spreadsheet data are not always consistent in their column names
or orders. {read.abares} standardises the column names and orders and
uses snake_case for all colnames with the first letter capitalised of
every column to help you do your work more efficiently. Columns are
formatted correctly for the data type, *e.g.*, dates are converted to
`Date` class, and numbers are converted to `numeric` class where
necessary, etc.

### Automated Repairing of Geospatial Data

The Australian Agricultural and Grazing Industries Survey (AAGIS) region
mapping files report geometry errors that can be repaired using the
[`sf::st_make_valid()`](https://r-spatial.github.io/sf/reference/valid.html)
function; {read.abares} automatically repairs these geometries for you
when you import the data. Or the Soil Thickness for Australian areas of
intensive agriculture of Layer 1 (A Horizon - top-soil) (derived from
soil mapping) NetCDF file has a classification that makes the resulting
maps have an incongruous legend; {read.abares} cleans this up on import
so that you only have nice continuous data in your resulting map.

### Multiple Geospatial Data Classes Supported

{read.abares} supports multiple classes of objects to support your
workflow with the NetCDF data. Select from spatial classes for the
Australian Gridded Farm Data (AGFD) NetCDF files:

- [{stars}](https://CRAN.R-project.org/package=stars),
- [{terra}](https://CRAN.R-project.org/package=terra),
- [{tidync}](https://CRAN.R-project.org/package=tidync), or if you
  prefer,
- a [{data.table}](https://CRAN.R-project.org/package=data.table)
  data.frame object of the whole data set.

Or for the Soil Thickness for Australian areas of intensive agriculture
of Layer 1 (A Horizon - top-soil) (derived from soil mapping) and land
use change data sets, select from:

- [{stars}](https://CRAN.R-project.org/package=stars), or
- [{terra}](https://CRAN.R-project.org/package=terra).

### Just Shutup and do Your Work!

{read.abares} offers users a way to opt out of verbosity at the package
level. There are three levels that are offered.

- `quiet` - no feedback except for on failure,
- `minimal` - feedback on failure and warnings is provided, and
- `verbose` - verbose feedback is provided on failure, warning and for
  processes like download time or data import.

## About Data Serviced

You might note that not all ABARES data are serviced by this package.
The list is hand-picked to be reasonably useful and maintainable,
*i.e.*, frequently updated values are not included in this, *e.g.*,
[Australian crop
reports](https://daff.ent.sirsidynix.net.au/client/en_AU/ABARES/search/results?te=ASSET&st=PD#).
However, if there is a data set that you feel would be useful to be
serviced by {read.abares}, please feel free to [open an
issue](https://github.com/adamhsparks/read.abares/issues/new) with
details about the data set or better yet, open a pull request!

## Metadata

Please report any [issues or
bugs](https://github.com/adamhsparks/read.abares/issues).

License: [MIT](https://adamhsparks.github.io/read.abares/LICENSE.md)

### Citations

Citing the data: Please refer to the ABARES website,
<https://www.agriculture.gov.au/abares/products/citations>, on how to
cite these data when you use them.

Citing {read.abares}: When citing the use of this package, please use,

``` r
library(read.abares)
#> 
#> Attaching package: 'read.abares'
#> The following object is masked from 'package:graphics':
#> 
#>     plot
#> The following objects are masked from 'package:base':
#> 
#>     levels, plot
citation("read.abares")
#> To cite package 'read.abares' in publications use:
#> 
#>   Sparks A (????). _read.abares: Download and Import Agricultural Data
#>   from the Australian Bureau of Agricultural and Resource Economics and
#>   Sciences (ABARES) and Australian Bureau of Statistics (ABS)_. R
#>   package version 2.0.0, <https://adamhsparks.github.io/read.abares/>.
#> 
#> A BibTeX entry for LaTeX users is
#> 
#>   @Manual{,
#>     title = {{read.abares}: Download and Import Agricultural Data from the
#>     Australian Bureau of Agricultural and Resource Economics and Sciences
#>     (ABARES) and Australian Bureau of Statistics (ABS)},
#>     author = {Adam H. Sparks},
#>     note = {R package version 2.0.0},
#>     url = {https://adamhsparks.github.io/read.abares/},
#>   }
```

### Contributing

#### Code of Conduct

Please note that the {read.abares} project is released with a
[Contributor Code of
Conduct](https://adamhsparks.github.io/read.abares/CODE_OF_CONDUCT.html).
By contributing to this project, you agree to abide by its terms.

------------------------------------------------------------------------

1.  <https://www.agriculture.gov.au/abares/about>

2.  If you are using Linux, you will likely need to install several
    system-level libraries, {pak} will do it’s best to install most of
    them but some may not be installable this way. For
    [Nectar](https://ardc.edu.au/services/ardc-nectar-research-cloud/)
    with a fresh Ubuntu image, you can use the following command to
    install system libraries to install {pak} and then {read.abares}. In
    your Linux terminal (not your R console, the “terminal” tab in
    RStudio should do here in most cases) type:
    `sudo apt update && sudo apt install libcurl4-openssl-dev libgdal-dev gdal-bin libgeos-dev libproj-dev libsqlite3-dev libudunits2-dev libxml2-dev`.

# Package index

## AAGIS Regions

Fetch and read the ABARES Agricultural and Grazing Industries Survey
(AAGIS) regions shapefile

- [`read_aagis_regions()`](https://adamhsparks.github.io/read.abares/reference/read_aagis_regions.md)
  : Read ABARES' "Australian Agricultural and Grazing Industries Survey"
  (AAGIS) Region Mapping Files

## ABS data

Fetch and read agricultural data provided by the Australian Bureau of
Statistics

- [`read_abs_broadacre_data()`](https://adamhsparks.github.io/read.abares/reference/read_abs_broadacre_data.md)
  : Get ABS' Broadacre Crops Production and Value by Australia, State
  and Territory by Year
- [`read_abs_horticulture_data()`](https://adamhsparks.github.io/read.abares/reference/read_abs_horticulture_data.md)
  : Get ABS' Horticulture Crops Production and Value by Australia, State
  and Territory by Year
- [`read_abs_livestock_data()`](https://adamhsparks.github.io/read.abares/reference/read_abs_livestock_data.md)
  : Read ABS' Livestock Production and Value by Australia, State and
  Territory by Year

## AGFD

Fetch and read the Australian Gridded Farm Data (AGFD) NetCDF files

- [`read_agfd_dt()`](https://adamhsparks.github.io/read.abares/reference/read_agfd_dt.md)
  : Read ABARES' "Australian Gridded Farm Data" (AGFD) NCDF Files as a
  data.table Object
- [`read_agfd_stars()`](https://adamhsparks.github.io/read.abares/reference/read_agfd_stars.md)
  : Read ABARES' "Australian Gridded Farm Data" (AGFD) NCDF files with
  stars
- [`read_agfd_terra()`](https://adamhsparks.github.io/read.abares/reference/read_agfd_terra.md)
  : Read ABARES' "Australian Gridded Farm Data" (AGFD) NCDF Files with
  terra
- [`read_agfd_tidync()`](https://adamhsparks.github.io/read.abares/reference/read_agfd_tidync.md)
  : Read ABARES' "Australian Gridded Farm Data" (AGFD) NCDF Files with
  tidync

## Estimates

Fetch and read the ABARES Estimates data

- [`read_estimates_by_performance_category()`](https://adamhsparks.github.io/read.abares/reference/read_estimates_by_performance_category.md)
  [`read_est_by_perf_cat()`](https://adamhsparks.github.io/read.abares/reference/read_estimates_by_performance_category.md)
  : Read ABARES' "Estimates by Performance Category" Data
- [`read_estimates_by_size()`](https://adamhsparks.github.io/read.abares/reference/read_estimates_by_size.md)
  [`read_est_by_size()`](https://adamhsparks.github.io/read.abares/reference/read_estimates_by_size.md)
  : Read ABARES' "Estimates by Size"
- [`read_historical_national_estimates()`](https://adamhsparks.github.io/read.abares/reference/read_historical_national_estimates.md)
  [`read_hist_nat_est()`](https://adamhsparks.github.io/read.abares/reference/read_historical_national_estimates.md)
  : Read ABARES' "Historical National Estimates"
- [`read_historical_regional_estimates()`](https://adamhsparks.github.io/read.abares/reference/read_historical_regional_estimates.md)
  [`read_hist_reg_est()`](https://adamhsparks.github.io/read.abares/reference/read_historical_regional_estimates.md)
  : Read ABARES' "Historical Regional Estimates"
- [`read_historical_state_estimates()`](https://adamhsparks.github.io/read.abares/reference/read_historical_state_estimates.md)
  [`read_hist_st_est()`](https://adamhsparks.github.io/read.abares/reference/read_historical_state_estimates.md)
  : Read ABARES' "Historical State Estimates"

## Historical Agricultural Forecast Database

Fetch and read the agricultural forecast database

- [`read_historical_forecast_database()`](https://adamhsparks.github.io/read.abares/reference/read_historical_forecast_database.md)
  [`read_historical_forecast()`](https://adamhsparks.github.io/read.abares/reference/read_historical_forecast_database.md)
  : Read ABARES' "Historical Forecast Database"

## Land Use

National (NLUM) and catchment (CLUM) level land use data

### Fetch and read land use related GeoTIFF files

- [`read_clum_stars()`](https://adamhsparks.github.io/read.abares/reference/read_clum_stars.md)
  : Read ABARES' Catchment Scale "Land Use of Australia" Data Using
  Stars
- [`read_clum_terra()`](https://adamhsparks.github.io/read.abares/reference/read_clum_terra.md)
  : Read ABARES' Catchment Scale "Land Use of Australia" GeoTIFFs Using
  terra
- [`read_nlum_stars()`](https://adamhsparks.github.io/read.abares/reference/read_nlum_stars.md)
  : Read ABARES' National Scale "Land Use of Australia" Data Using stars
- [`read_nlum_terra()`](https://adamhsparks.github.io/read.abares/reference/read_nlum_terra.md)
  : Read ABARES' National Scale "Land Use of Australia" Data Using terra

### CLUM Commodities

Fetch and read the catchment level commodities shapefile

- [`read_clum_commodities()`](https://adamhsparks.github.io/read.abares/reference/read_clum_commodities.md)
  : Read ABARES' Catchment Scale "Land Use of Australia" Commodities
  Shapefile

### Meta

Information about the CLUM and NLUM data sets

- [`view_clum_metadata_pdf()`](https://adamhsparks.github.io/read.abares/reference/view_clum_metadata_pdf.md)
  : Displays the PDF Metadata for ABARES' "Catchment Land Use" (CLUM)
  Raster Files in a Native Viewer
- [`view_nlum_metadata_pdf()`](https://adamhsparks.github.io/read.abares/reference/view_nlum_metadata_pdf.md)
  : Displays PDF Metadata for ABARES' "National Land Use" (NLUM) Raster
  Files in a Native Viewer

## Topsoil Thickness

Soil Thickness for Australian areas of intensive agriculture of Layer 1
(A Horizon - top-soil) (derived from soil mapping)

### Fetch and read soil thickness GeoTIFF files

- [`read_topsoil_thickness_stars()`](https://adamhsparks.github.io/read.abares/reference/read_topsoil_thickness_stars.md)
  : Read ABARES' "Soil Thickness for Australian Areas of Intensive
  Agriculture of Layer 1" with stars
- [`read_topsoil_thickness_terra()`](https://adamhsparks.github.io/read.abares/reference/read_topsoil_thickness_terra.md)
  : Read ABARES' "Soil Thickness for Australian Areas of Intensive
  Agriculture of Layer 1" with terra

### Meta

View metadata associated with soil thickness data

- [`print_topsoil_thickness_metadata()`](https://adamhsparks.github.io/read.abares/reference/print_topsoil_thickness_metadata.md)
  : Prints the text file Metadata for ABARES' Topsoil Thickness for
  "Australian Areas of Intensive Agriculture of Layer 1"

## Trade

Fetch and read ABARES Australian agricultural export data

- [`read_abares_trade()`](https://adamhsparks.github.io/read.abares/reference/read_abares_trade.md)
  : Read Data from the ABARES Trade Dashboard
- [`read_abares_trade_regions()`](https://adamhsparks.github.io/read.abares/reference/read_abares_trade_regions.md)
  : Read "Trade Data Regions" from the ABARES Trade Dashboard

## {read.abares} Options

Get or set package options

- [`read.abares_options()`](https://adamhsparks.github.io/read.abares/reference/read.abares_options.md)
  : Get or Set read.abares Options

# Articles

### All vignettes

- [Setting Global Options for
  read.abares](https://adamhsparks.github.io/read.abares/articles/options.md):
- [Working with spatial data available through
  read.abares](https://adamhsparks.github.io/read.abares/articles/read.abares.md):
